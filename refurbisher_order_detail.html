<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order Details - RefurBazar</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Space+Grotesk:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <link href="css/refurbisher_dash.css" rel="stylesheet">
</head>

<body>
    <nav class="navbar navbar-expand-lg main-navbar" id="navbar">
        <div class="container-fluid px-4">
            <a class="navbar-brand me-auto" href="index.html">
                <i class="fas fa-recycle me-2"></i>RefurBazar
            </a>

            <div class="navbar-search mx-auto d-none d-lg-block">
                <div class="search-container">
                    <input type="text" class="form-control search-input" placeholder="Search orders...">
                    <button class="search-btn"><i class="fas fa-search"></i></button>
                </div>
            </div>

            <div class="d-flex align-items-center ms-auto">
                <div class="dropdown">
                    <a href="#" class="nav-icon me-3 dropdown-toggle" data-bs-toggle="dropdown">
                        <i class="fas fa-bell"></i><span class="badge">3</span>
                    </a>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="#">New order received</a></li>
                        <li><a class="dropdown-item" href="#">Profile verification pending</a></li>
                        <li><a class="dropdown-item" href="#">Payment processed</a></li>
                    </ul>
                </div>
                <div class="dropdown">
                    <a href="#" class="btn btn-primary dropdown-toggle" data-bs-toggle="dropdown">
                        <i class="fas fa-user me-2"></i>Divyam Shah
                    </a>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="refurbisher_profile.html">Profile</a></li>
                        <li><a class="dropdown-item" href="#">Settings</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="#">Logout</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>

    <div class="dashboard-container">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-3 col-md-4">
                    <div class="dashboard-sidebar">
                        <div class="text-center mb-4">
                            <div class="avatar-lg mb-3">
                                <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face" 
                                     alt="Profile" class="rounded-circle" width="80" height="80">
                            </div>
                            <h5 class="mb-1">Divyam Shah</h5>
                            <p class="text-muted mb-0">Refurbisher</p>
                        </div>

                        <nav>
                            <ul class="dashboard-nav">
                                <li class="dashboard-nav-item">
                                    <a href="refurbisher_dashboard.html" class="dashboard-nav-link">
                                        <i class="fas fa-tachometer-alt"></i>Dashboard
                                    </a>
                                </li>
                                <li class="dashboard-nav-item">
                                    <a href="refurbisher_listings.html" class="dashboard-nav-link">
                                        <i class="fas fa-list"></i>My Listings
                                    </a>
                                </li>
                                <li class="dashboard-nav-item">
                                    <a href="refurbisher_orders.html" class="dashboard-nav-link active">
                                        <i class="fas fa-shopping-bag"></i>Orders
                                    </a>
                                </li>
                                <li class="dashboard-nav-item">
                                    <a href="refurbisher_analytics.html" class="dashboard-nav-link">
                                        <i class="fas fa-chart-bar"></i>Analytics
                                    </a>
                                </li>
                                <li class="dashboard-nav-item">
                                    <a href="refurbisher_profile.html" class="dashboard-nav-link">
                                        <i class="fas fa-user"></i>Profile
                                    </a>
                                </li>
                            </ul>
                        </nav>
                    </div>
                </div>

                <div class="col-lg-9 col-md-8">
                    <div class="dashboard-main">
                        <div class="dashboard-header">
                            <div class="row align-items-center">
                                <div class="col-md-8">
                                    <nav aria-label="breadcrumb">
                                        <ol class="breadcrumb">
                                            <li class="breadcrumb-item"><a href="refurbisher_orders.html">Orders</a></li>
                                            <li class="breadcrumb-item active">Order #ORD-001</li>
                                        </ol>
                                    </nav>
                                    <h2 class="mb-2">Order Details</h2>
                                    <p class="text-muted mb-0">Complete order information and management</p>
                                </div>
                                <div class="col-md-4 text-end">
                                    <div class="btn-group">
                                        <button class="btn btn-outline-primary" onclick="downloadInvoice()">
                                            <i class="fas fa-file-invoice me-2"></i>Invoice
                                        </button>
                                        <button class="btn btn-outline-secondary" onclick="downloadShippingLabel()">
                                            <i class="fas fa-shipping-fast me-2"></i>Label
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="order-status-banner processing">
                            <div class="row align-items-center">
                                <div class="col-md-8">
                                    <div class="d-flex align-items-center">
                                        <div class="status-icon">
                                            <i class="fas fa-cog fa-spin"></i>
                                        </div>
                                        <div>
                                            <h4 class="mb-1">Order is being processed</h4>
                                            <p class="mb-0">Expected to ship by Dec 18, 2024</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 text-end">
                                    <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#updateStatusModal">
                                        <i class="fas fa-edit me-2"></i>Update Status
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-lg-8">
                                <div class="dashboard-card">
                                    <div class="card-header">
                                        <h4 class="card-title">Order Summary</h4>
                                        <span class="status-badge status-processing">Processing</span>
                                    </div>
                                    <div class="order-summary">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="order-info">
                                                    <label>Order ID</label>
                                                    <span class="fw-bold">#ORD-001</span>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="order-info">
                                                    <label>Order Date</label>
                                                    <span>December 15, 2024</span>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="order-info">
                                                    <label>Payment Method</label>
                                                    <span><i class="fas fa-credit-card me-2"></i>Credit Card</span>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="order-info">
                                                    <label>Payment Status</label>
                                                    <span class="text-success"><i class="fas fa-check-circle me-1"></i>Paid</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="dashboard-card">
                                    <div class="card-header">
                                        <h4 class="card-title">Product Details</h4>
                                    </div>
                                    <div class="product-detail-card">
                                        <div class="row align-items-center">
                                            <div class="col-md-2">
                                                <img src="https://images.unsplash.com/photo-1592750475338-74b7b21085ab?w=100&h=100&fit=crop" 
                                                     alt="iPhone 12 Pro" class="product-image">
                                            </div>
                                            <div class="col-md-6">
                                                <h5 class="product-title">iPhone 12 Pro</h5>
                                                <div class="product-specs">
                                                    <span class="spec-item">128GB Storage</span>
                                                    <span class="spec-item">Pacific Blue</span>
                                                    <span class="spec-item">Unlocked</span>
                                                </div>
                                                <div class="product-condition">
                                                    <span class="condition-badge excellent">Excellent Condition</span>
                                                </div>
                                                <div class="product-details-list">
                                                    <div class="detail-item">
                                                        <span class="detail-label">IMEI:</span>
                                                        <span class="detail-value">123456789012345</span>
                                                    </div>
                                                    <div class="detail-item">
                                                        <span class="detail-label">Battery Health:</span>
                                                        <span class="detail-value text-success">89%</span>
                                                    </div>
                                                    <div class="detail-item">
                                                        <span class="detail-label">Screen:</span>
                                                        <span class="detail-value text-success">Perfect</span>
                                                    </div>
                                                    <div class="detail-item">
                                                        <span class="detail-label">Camera:</span>
                                                        <span class="detail-value text-success">Working</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-2 text-center">
                                                <div class="quantity-info">
                                                    <label>Quantity</label>
                                                    <span class="quantity-value">1</span>
                                                </div>
                                            </div>
                                            <div class="col-md-2 text-end">
                                                <div class="price-info">
                                                    <div class="original-price">₹50,000</div>
                                                    <div class="selling-price">₹45,000</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="dashboard-card">
                                    <div class="card-header">
                                        <h4 class="card-title">Shipping & Pickup</h4>
                                        <button class="btn btn-outline-primary btn-sm" data-bs-toggle="modal" data-bs-target="#schedulePickupModal">
                                            <i class="fas fa-calendar me-2"></i>Schedule Pickup
                                        </button>
                                    </div>
                                    <div class="shipping-info">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="shipping-method">
                                                    <h6><i class="fas fa-truck me-2"></i>Shipping Method</h6>
                                                    <p>Standard Delivery (3-5 business days)</p>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="pickup-status">
                                                    <h6><i class="fas fa-calendar-check me-2"></i>Pickup Status</h6>
                                                    <p class="text-warning">Pickup not scheduled</p>
                                                    <small class="text-muted">Schedule pickup to proceed with shipping</small>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="tracking-info mt-3">
                                            <h6><i class="fas fa-route me-2"></i>Tracking Information</h6>
                                            <div class="tracking-number">
                                                <span class="text-muted">Tracking Number: </span>
                                                <span class="fw-bold">Will be generated after pickup</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="dashboard-card">
                                    <div class="card-header">
                                        <h4 class="card-title">Order Timeline</h4>
                                    </div>
                                    <div class="order-timeline">
                                        <div class="timeline-item completed">
                                            <div class="timeline-icon">
                                                <i class="fas fa-check"></i>
                                            </div>
                                            <div class="timeline-content">
                                                <h6>Order Placed</h6>
                                                <p>Order was successfully placed by customer</p>
                                                <small class="text-muted">Dec 15, 2024 at 10:30 AM</small>
                                            </div>
                                        </div>
                                        <div class="timeline-item completed">
                                            <div class="timeline-icon">
                                                <i class="fas fa-credit-card"></i>
                                            </div>
                                            <div class="timeline-content">
                                                <h6>Payment Confirmed</h6>
                                                <p>Payment of ₹45,000 received successfully</p>
                                                <small class="text-muted">Dec 15, 2024 at 10:32 AM</small>
                                            </div>
                                        </div>
                                        <div class="timeline-item active">
                                            <div class="timeline-icon">
                                                <i class="fas fa-cog"></i>
                                            </div>
                                            <div class="timeline-content">
                                                <h6>Processing Order</h6>
                                                <p>Order is being prepared for shipment</p>
                                                <small class="text-muted">Dec 15, 2024 at 11:00 AM</small>
                                            </div>
                                        </div>
                                        <div class="timeline-item pending">
                                            <div class="timeline-icon">
                                                <i class="fas fa-truck"></i>
                                            </div>
                                            <div class="timeline-content">
                                                <h6>Ready to Ship</h6>
                                                <p>Order will be ready for pickup</p>
                                                <small class="text-muted">Pending</small>
                                            </div>
                                        </div>
                                        <div class="timeline-item pending">
                                            <div class="timeline-icon">
                                                <i class="fas fa-shipping-fast"></i>
                                            </div>
                                            <div class="timeline-content">
                                                <h6>Shipped</h6>
                                                <p>Order has been shipped to customer</p>
                                                <small class="text-muted">Pending</small>
                                            </div>
                                        </div>
                                        <div class="timeline-item pending">
                                            <div class="timeline-icon">
                                                <i class="fas fa-home"></i>
                                            </div>
                                            <div class="timeline-content">
                                                <h6>Delivered</h6>
                                                <p>Order delivered to customer</p>
                                                <small class="text-muted">Pending</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-lg-4">
                                <div class="dashboard-card">
                                    <div class="card-header">
                                        <h4 class="card-title">Customer Information</h4>
                                        <button class="btn btn-outline-secondary btn-sm" onclick="contactCustomer()">
                                            <i class="fas fa-phone me-1"></i>Contact
                                        </button>
                                    </div>
                                    <div class="customer-info">
                                        <div class="customer-profile">
                                            <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=60&h=60&fit=crop&crop=face" 
                                                 alt="Customer" class="customer-avatar">
                                            <div>
                                                <h5 class="mb-1">Rahul Sharma</h5>
                                                <p class="text-muted mb-0">Premium Customer</p>
                                            </div>
                                        </div>
                                        <div class="contact-details">
                                            <div class="contact-item">
                                                <i class="fas fa-envelope me-2"></i>
                                                <span>rahul.sharma@email.com</span>
                                            </div>
                                            <div class="contact-item">
                                                <i class="fas fa-phone me-2"></i>
                                                <span>+91 98765 43210</span>
                                            </div>
                                        </div>
                                        <div class="customer-stats">
                                            <div class="stat-item">
                                                <span class="stat-label">Total Orders</span>
                                                <span class="stat-value">12</span>
                                            </div>
                                            <div class="stat-item">
                                                <span class="stat-label">Total Spent</span>
                                                <span class="stat-value">₹2,45,000</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="dashboard-card">
                                    <div class="card-header">
                                        <h4 class="card-title">Delivery Address</h4>
                                        <button class="btn btn-outline-secondary btn-sm" onclick="viewOnMap()">
                                            <i class="fas fa-map-marker-alt me-1"></i>Map
                                        </button>
                                    </div>
                                    <div class="address-info">
                                        <div class="address-details">
                                            <h6>Rahul Sharma</h6>
                                            <p class="mb-1">Flat 301, Green Valley Apartments</p>
                                            <p class="mb-1">Sector 18, Noida</p>
                                            <p class="mb-1">Uttar Pradesh - 201301</p>
                                            <p class="mb-0">India</p>
                                        </div>
                                        <div class="delivery-instructions">
                                            <h6 class="mt-3">Delivery Instructions</h6>
                                            <p class="text-muted">Please call before delivery. Security gate code: 1234</p>
                                        </div>
                                    </div>
                                </div>

                                <div class="dashboard-card">
                                    <div class="card-header">
                                        <h4 class="card-title">Billing Information</h4>
                                    </div>
                                    <div class="billing-info">
                                        <div class="billing-summary">
                                            <div class="billing-item">
                                                <span>Product Price</span>
                                                <span>₹45,000</span>
                                            </div>
                                            <div class="billing-item">
                                                <span>Shipping</span>
                                                <span class="text-success">Free</span>
                                            </div>
                                            <div class="billing-item">
                                                <span>GST (18%)</span>
                                                <span>₹8,100</span>
                                            </div>
                                            <div class="billing-item discount">
                                                <span>Discount</span>
                                                <span class="text-success">-₹3,100</span>
                                            </div>
                                            <hr>
                                            <div class="billing-item total">
                                                <span>Total Amount</span>
                                                <span>₹50,000</span>
                                            </div>
                                        </div>
                                        <div class="payment-info mt-3">
                                            <h6>Payment Details</h6>
                                            <div class="payment-method">
                                                <i class="fas fa-credit-card me-2"></i>
                                                <span>**** **** **** 1234</span>
                                            </div>
                                            <small class="text-muted">Paid on Dec 15, 2024</small>
                                        </div>
                                    </div>
                                </div>

                                <div class="dashboard-card">
                                    <div class="card-header">
                                        <h4 class="card-title">Quick Actions</h4>
                                    </div>
                                    <div class="quick-actions">
                                        <button class="btn btn-outline-primary w-100 mb-2" onclick="downloadInvoice()">
                                            <i class="fas fa-file-invoice me-2"></i>Download Invoice
                                        </button>
                                        <button class="btn btn-outline-secondary w-100 mb-2" onclick="downloadShippingLabel()">
                                            <i class="fas fa-shipping-fast me-2"></i>Download Shipping Label
                                        </button>
                                        <button class="btn btn-outline-info w-100 mb-2" data-bs-toggle="modal" data-bs-target="#schedulePickupModal">
                                            <i class="fas fa-calendar me-2"></i>Schedule Pickup
                                        </button>
                                        <button class="btn btn-outline-success w-100 mb-2" onclick="contactCustomer()">
                                            <i class="fas fa-phone me-2"></i>Contact Customer
                                        </button>
                                        <button class="btn btn-outline-warning w-100" data-bs-toggle="modal" data-bs-target="#updateStatusModal">
                                            <i class="fas fa-edit me-2"></i>Update Status
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="schedulePickupModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Schedule Pickup</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="pickupForm">
                        <div class="mb-3">
                            <label class="form-label">Pickup Date</label>
                            <input type="date" class="form-control" id="pickupDate" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Pickup Time Slot</label>
                            <select class="form-select" id="pickupTime" required>
                                <option value="">Select time slot</option>
                                <option value="09:00-12:00">9:00 AM - 12:00 PM</option>
                                <option value="12:00-15:00">12:00 PM - 3:00 PM</option>
                                <option value="15:00-18:00">3:00 PM - 6:00 PM</option>
                                <option value="18:00-21:00">6:00 PM - 9:00 PM</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Pickup Address</label>
                            <textarea class="form-control" rows="3" id="pickupAddress" placeholder="Enter pickup address"></textarea>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Special Instructions</label>
                            <textarea class="form-control" rows="2" id="pickupInstructions" placeholder="Any special instructions for pickup"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="schedulePickup()">Schedule Pickup</button>
                </div>
            </div>
        </div>
    </div>

     <!-- Update Status Modal  -->
    <div class="modal fade" id="updateStatusModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Update Order Status</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="statusForm">
                        <div class="mb-3">
                            <label class="form-label">Current Status</label>
                            <input type="text" class="form-control" value="Processing" readonly>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">New Status</label>
                            <select class="form-select" id="newStatus" required>
                                <option value="">Select new status</option>
                                <option value="confirmed">Confirmed</option>
                                <option value="ready-to-ship">Ready to Ship</option>
                                <option value="shipped">Shipped</option>
                                <option value="out-for-delivery">Out for Delivery</option>
                                <option value="delivered">Delivered</option>
                                <option value="cancelled">Cancelled</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Tracking Number (if shipped)</label>
                            <input type="text" class="form-control" id="trackingNumber" placeholder="Enter tracking number">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Status Notes</label>
                            <textarea class="form-control" rows="3" id="statusNotes" placeholder="Add notes about status update"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="updateOrderStatus()">Update Status</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/refurbisher_order_detail.js"></script>
</body>

</html>
